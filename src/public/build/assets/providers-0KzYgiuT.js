document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("category_filter");n.setAttribute("action",window.location.href),n.addEventListener("submit",function(e){e.preventDefault();const t=n.getAttribute("action");window.location.replace(t)});const a=document.querySelectorAll(".category-checkbox"),r=[];a.forEach(function(e){const t=function(){const i=Array.from(a).filter(c=>c.checked).map(c=>c.value),o=new URLSearchParams(window.location.search);i.length>0?o.set("categories",i.join(",")):o.delete("categories");const s=window.location.pathname+"?"+o.toString();console.log({newUrl:s}),n.setAttribute("action",s)};e.addEventListener("change",t),r.push({element:e,handler:t})}),window.addEventListener("beforeunload",function(){r.forEach(({element:e,handler:t})=>{e.removeEventListener("change",t)})})});
